<!--é¦–é¡µ-->
<view class="page-container">
  <!-- å¤´éƒ¨å¡ç‰‡ -->
  <view class="header-card">
    <view class="header-top">
      <view class="ledger-info" bindtap="switchLedger">
        <text class="ledger-icon">{{currentLedger.icon || 'ğŸ“’'}}</text>
        <text class="ledger-name">{{currentLedger.name || 'é»˜è®¤è´¦æœ¬'}}</text>
        <image class="arrow-icon" src="/assets/icons/chevron-down.png" mode="aspectFit"></image>
      </view>
      <text class="month-label">{{currentMonth}}æœˆ</text>
    </view>
    
    <view class="balance-section">
      <text class="balance-label">æœ¬æœˆç»“ä½™</text>
      <view class="balance-amount">
        <text class="currency">Â¥</text>
        <text class="amount {{balance >= 0 ? 'positive' : 'negative'}}">{{balanceDisplay}}</text>
      </view>
    </view>
    
    <view class="summary-row">
      <view class="summary-item">
        <text class="summary-label">æ”¶å…¥</text>
        <text class="summary-value income">+{{incomeDisplay}}</text>
      </view>
      <view class="summary-divider"></view>
      <view class="summary-item">
        <text class="summary-label">æ”¯å‡º</text>
        <text class="summary-value expense">-{{expenseDisplay}}</text>
      </view>
    </view>
  </view>
  
  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-btn income-btn" bindtap="goToRecordIncome">
      <view class="action-icon income-icon">
        <image src="/assets/icons/plus.png" mode="aspectFit"></image>
      </view>
      <text class="action-text">è®°æ”¶å…¥</text>
    </view>
    <view class="action-btn expense-btn" bindtap="goToRecordExpense">
      <view class="action-icon expense-icon">
        <image src="/assets/icons/minus.png" mode="aspectFit"></image>
      </view>
      <text class="action-text">è®°æ”¯å‡º</text>
    </view>
  </view>
  
  <!-- æœ€è¿‘è®°å½• -->
  <view class="recent-section">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘è®°å½•</text>
      <view class="view-all" bindtap="goToRecords">
        <text>æŸ¥çœ‹å…¨éƒ¨</text>
        <image src="/assets/icons/chevron-right.png" mode="aspectFit"></image>
      </view>
    </view>
    
    <view class="records-list" wx:if="{{recentRecords.length > 0}}">
      <view class="record-item" wx:for="{{recentRecords}}" wx:key="id" bindtap="editRecord" data-id="{{item.id}}">
        <view class="record-icon {{item.type}}">
          <image src="/assets/icons/category/{{item.categoryIcon}}.png" mode="aspectFit"></image>
        </view>
        <view class="record-info">
          <text class="record-category">{{item.categoryName}}</text>
          <text class="record-note" wx:if="{{item.note}}">{{item.note}}</text>
          <text class="record-date">{{item.dateLabel}}</text>
        </view>
        <text class="record-amount {{item.type}}">{{item.type === 'income' ? '+' : '-'}}{{item.amountDisplay}}</text>
      </view>
    </view>
    
    <view class="empty-state" wx:else>
      <image src="/assets/icons/empty.png" mode="aspectFit"></image>
      <text>æš‚æ— è®°å½•ï¼Œå¼€å§‹è®°è´¦å§</text>
    </view>
  </view>
</view>

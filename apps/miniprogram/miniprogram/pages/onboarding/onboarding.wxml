<!--首次使用引导页 - 微信授权获取用户信息-->
<view class="page-container">
  <view class="content">
    <!-- 欢迎标题 -->
    <view class="welcome-section">
      <view class="welcome-icon">
        <text>👋</text>
      </view>
      <text class="welcome-title">欢迎使用记账本</text>
      <text class="welcome-desc">点击头像和昵称完成设置</text>
    </view>
    
    <!-- 用户信息设置（微信授权） -->
    <view class="user-info-section">
      <!-- 头像选择（使用微信头像选择器） -->
      <button 
        class="avatar-btn" 
        open-type="chooseAvatar" 
        bindchooseavatar="onChooseAvatar"
      >
        <image 
          class="avatar-image" 
          src="{{avatarUrl || '/assets/icons/default-avatar.png'}}" 
          mode="aspectFill"
        />
        <view class="avatar-edit-icon">
          <text>📷</text>
        </view>
      </button>
      <text class="avatar-hint">点击选择头像</text>
      
      <!-- 昵称输入（微信昵称键盘） -->
      <view class="nickname-section">
        <input 
          type="nickname"
          class="nickname-input" 
          placeholder="点击输入昵称" 
          value="{{nickname}}"
          bindinput="onNicknameInput"
          maxlength="20"
        />
      </view>
    </view>
    
    <!-- 账本设置 -->
    <view class="ledger-section">
      <text class="section-title">创建你的第一个账本</text>
      
      <input 
        class="ledger-input" 
        placeholder="账本名称（默认：日常账本）" 
        value="{{ledgerName}}"
        bindinput="onLedgerNameInput"
        maxlength="20"
      />
      
      <view class="icon-section">
        <text class="icon-label">选择图标</text>
        <view class="icon-grid">
          <view 
            class="icon-item {{ledgerIcon === item ? 'selected' : ''}}"
            wx:for="{{ledgerIcons}}"
            wx:key="*this"
            bindtap="selectIcon"
            data-icon="{{item}}"
          >
            <text>{{item}}</text>
          </view>
        </view>
      </view>

      <!-- 云同步提示 -->
      <view class="sync-hint">
        <text class="hint-text">☁️ 数据将自动同步到云端</text>
      </view>
    </view>
    
    <!-- 开始按钮 -->
    <button 
      class="start-btn {{!nickname ? 'disabled' : ''}}" 
      bindtap="complete" 
      disabled="{{!nickname || isLoading}}"
    >
      {{isLoading ? '初始化中...' : '开始记账'}}
    </button>
  </view>
</view>
